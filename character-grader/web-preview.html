<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Character Grade Preview</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 2rem auto;
        max-width: 720px;
        line-height: 1.6;
        background: #121212;
        color: #f5f5f5;
      }
      pre {
        background: #1e1e1e;
        padding: 1rem;
        overflow-x: auto;
        border-radius: 0.5rem;
      }
      .tag {
        display: inline-block;
        background: #2e7d32;
        padding: 0.25rem 0.5rem;
        border-radius: 999px;
        margin-right: 0.5rem;
      }
      .section {
        margin-bottom: 1.5rem;
      }
    </style>
  </head>
  <body>
    <h1>Character Grade Preview</h1>
    <p>Drop <code>out.json</code> next to this file and reload to view the latest grade.</p>
    <div id="content">Loading&hellip;</div>
    <script>
      async function loadGrade() {
        try {
          const response = await fetch('out.json', { cache: 'no-store' });
          if (!response.ok) {
            throw new Error('out.json not found');
          }
          const data = await response.json();
          const container = document.getElementById('content');
          container.innerHTML = '';
          const header = document.createElement('div');
          header.className = 'section';
          header.innerHTML = `<span class="tag">${data.strength.toUpperCase()}</span> Score: ${data.score}`;
          container.appendChild(header);

          const signals = document.createElement('div');
          signals.className = 'section';
          signals.innerHTML = `<h2>Signals</h2><pre>${JSON.stringify(data.signals, null, 2)}</pre>`;
          container.appendChild(signals);

          const feedback = document.createElement('div');
          feedback.className = 'section';
          feedback.innerHTML = `<h2>Feedback</h2><p>${data.feedback}</p>`;
          container.appendChild(feedback);

          const maneuvers = document.createElement('div');
          maneuvers.className = 'section';
          maneuvers.innerHTML = `<h2>Maneuvers</h2><ul>${(data.maneuvers || []).map(m => `<li>${m}</li>`).join('')}</ul>`;
          container.appendChild(maneuvers);

          const rationale = document.createElement('div');
          rationale.className = 'section';
          rationale.innerHTML = `<h2>Rationale</h2><ul>${(data.rationale || []).map(r => `<li>${r}</li>`).join('')}</ul>`;
          container.appendChild(rationale);
        } catch (err) {
          document.getElementById('content').textContent = err.message;
        }
      }
      loadGrade();
    </script>
  </body>
</html>
